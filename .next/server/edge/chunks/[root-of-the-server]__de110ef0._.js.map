{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport type { NextRequest } from \"next/server\";\r\nimport { createServerClient } from \"@supabase/ssr\";\r\n\r\nexport async function middleware(req: NextRequest) {\r\n  const res = NextResponse.next();\r\n\r\n  // Cria supabase no contexto da middleware\r\n  const supabase = createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        get(name: string) {\r\n          return req.cookies.get(name)?.value;\r\n        },\r\n        set(name: string, value: string, options: any) {\r\n          res.cookies.set(name, value, options);\r\n        },\r\n        remove(name: string, options: any) {\r\n          res.cookies.delete({ name, ...options });\r\n        },\r\n      },\r\n    }\r\n  );\r\n\r\n  // Obtém sessão atual\r\n  const {\r\n    data: { session },\r\n  } = await supabase.auth.getSession();\r\n\r\n  const pathname = req.nextUrl.pathname;\r\n  const isAuth = !!session?.user;\r\n\r\n  // Rotas públicas\r\n  const publicRoutes = [\r\n    \"/login\",\r\n    \"/register\",\r\n    \"/quiz\",\r\n    \"/quiz/motivation\",\r\n    \"/forgot-password\",\r\n    \"/onboarding\",\r\n    \"/api/auth\",\r\n  ];\r\n\r\n  const isPublic = publicRoutes.some((r) => pathname.startsWith(r));\r\n\r\n  // Bloqueia rotas privadas\r\n  if (!isAuth && !isPublic) {\r\n    const redirectUrl = new URL(\"/login\", req.url);\r\n    return NextResponse.redirect(redirectUrl);\r\n  }\r\n\r\n  // Evita usuário logado ir pra login/register\r\n  if (isAuth && [\"/login\", \"/register\"].includes(pathname)) {\r\n    const redirectUrl = new URL(\"/app/home\", req.url);\r\n    return NextResponse.redirect(redirectUrl);\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    \"/((?!_next/static|_next/image|favicon.ico).*)\",\r\n  ],\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAEA;AAAA;;;AAEO,eAAe,WAAW,GAAgB;IAC/C,MAAM,MAAM,6LAAA,CAAA,eAAY,CAAC,IAAI;IAE7B,0CAA0C;IAC1C,MAAM,WAAW,CAAA,GAAA,iLAAA,CAAA,qBAAkB,AAAD,sUAGhC;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAY;gBAC3C,IAAI,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;YAC/B;YACA,QAAO,IAAY,EAAE,OAAY;gBAC/B,IAAI,OAAO,CAAC,MAAM,CAAC;oBAAE;oBAAM,GAAG,OAAO;gBAAC;YACxC;QACF;IACF;IAGF,qBAAqB;IACrB,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAElC,MAAM,WAAW,IAAI,OAAO,CAAC,QAAQ;IACrC,MAAM,SAAS,CAAC,CAAC,SAAS;IAE1B,iBAAiB;IACjB,MAAM,eAAe;QACnB;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,WAAW,aAAa,IAAI,CAAC,CAAC,IAAM,SAAS,UAAU,CAAC;IAE9D,0BAA0B;IAC1B,IAAI,CAAC,UAAU,CAAC,UAAU;QACxB,MAAM,cAAc,IAAI,IAAI,UAAU,IAAI,GAAG;QAC7C,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,6CAA6C;IAC7C,IAAI,UAAU;QAAC;QAAU;KAAY,CAAC,QAAQ,CAAC,WAAW;QACxD,MAAM,cAAc,IAAI,IAAI,aAAa,IAAI,GAAG;QAChD,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;KACD;AACH"}}]
}