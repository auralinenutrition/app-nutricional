{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/src/components/home/BottomBar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { Home, Utensils, ClipboardList, User } from \"lucide-react\";\r\n\r\nexport default function BottomBar() {\r\n  return (\r\n    <div className=\"fixed bottom-0 w-full bg-white border-t border-gray-200 z-30 shadow-[0_-6px_18px_rgba(0,0,0,0.06)]\">\r\n      <div className=\"flex justify-around py-3\">\r\n        <Link href=\"/home\" className=\"flex flex-col items-center gap-1\">\r\n          <Home size={22} strokeWidth={2} className=\"text-gray-700\" />\r\n        </Link>\r\n\r\n        <Link href=\"/meals\" className=\"flex flex-col items-center gap-1\">\r\n          <Utensils size={22} strokeWidth={2} className=\"text-gray-700\" />\r\n        </Link>\r\n\r\n        <Link href=\"/shopping\" className=\"flex flex-col items-center gap-1\">\r\n          <ClipboardList size={22} strokeWidth={2} className=\"text-gray-700\" />\r\n        </Link>\r\n\r\n        <Link href=\"/profile\" className=\"flex flex-col items-center gap-1\">\r\n          <User size={22} strokeWidth={2} className=\"text-gray-700\" />\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AAHA;;;;AAKe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAQ,WAAU;8BAC3B,cAAA,8OAAC,mMAAA,CAAA,OAAI;wBAAC,MAAM;wBAAI,aAAa;wBAAG,WAAU;;;;;;;;;;;8BAG5C,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAS,WAAU;8BAC5B,cAAA,8OAAC,0MAAA,CAAA,WAAQ;wBAAC,MAAM;wBAAI,aAAa;wBAAG,WAAU;;;;;;;;;;;8BAGhD,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAY,WAAU;8BAC/B,cAAA,8OAAC,wNAAA,CAAA,gBAAa;wBAAC,MAAM;wBAAI,aAAa;wBAAG,WAAU;;;;;;;;;;;8BAGrD,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAW,WAAU;8BAC9B,cAAA,8OAAC,kMAAA,CAAA,OAAI;wBAAC,MAAM;wBAAI,aAAa;wBAAG,WAAU;;;;;;;;;;;;;;;;;;;;;;AAKpD","debugId":null}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/src/components/home/ActionMenu.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Utensils, Droplet, Scale, Camera } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ntype Props = {\r\n  open: boolean;\r\n  onClose?: () => void;\r\n};\r\n\r\nexport default function ActionMenu({ open, onClose }: Props) {\r\n  const router = useRouter();\r\n\r\n  const actions = [\r\n    {\r\n      key: \"meal\",\r\n      label: \"Registrar refeição\",\r\n      icon: <Utensils size={20} strokeWidth={2.2} className=\"text-[#00C974]\" />,\r\n      route: \"/meals/new\",\r\n    },\r\n    {\r\n      key: \"water\",\r\n      label: \"Registrar água\",\r\n      icon: <Droplet size={20} strokeWidth={2.2} className=\"text-[#00C974]\" />,\r\n      route: \"/water\",\r\n    },\r\n    {\r\n      key: \"weight\",\r\n      label: \"Registrar peso\",\r\n      icon: <Scale size={20} strokeWidth={2.2} className=\"text-[#00C974]\" />,\r\n      route: \"/progress/weight\",\r\n    },\r\n    {\r\n      key: \"photo\",\r\n      label: \"Foto de progresso\",\r\n      icon: <Camera size={20} strokeWidth={2.2} className=\"text-[#00C974]\" />,\r\n      route: \"/progress/photo\",\r\n    },\r\n  ];\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 12 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        exit={{ opacity: 0, y: 10 }}\r\n        className=\"fixed right-6 bottom-36 z-50 flex flex-col gap-3\"\r\n      >\r\n        {actions.map((a, i) => (\r\n          <motion.button\r\n            key={a.key}\r\n            onClick={() => {\r\n              router.push(a.route);\r\n              if (onClose) onClose();\r\n            }}\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0, transition: { delay: i * 0.06 } }}\r\n            exit={{ opacity: 0, y: 8 }}\r\n            className=\"flex items-center gap-3 w-56 bg-white rounded-2xl px-5 py-3 shadow-[0_8px_20px_rgba(0,0,0,0.08)]\"\r\n          >\r\n            <div className=\"w-6 h-6 flex items-center justify-center\">{a.icon}</div>\r\n            <div className=\"text-[#0A0A0A] font-medium text-base\">{a.label}</div>\r\n          </motion.button>\r\n        ))}\r\n      </motion.div>\r\n    </AnimatePresence>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAJA;;;;;AAWe,SAAS,WAAW,EAAE,IAAI,EAAE,OAAO,EAAS;IACzD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,UAAU;QACd;YACE,KAAK;YACL,OAAO;YACP,oBAAM,8OAAC,0MAAA,CAAA,WAAQ;gBAAC,MAAM;gBAAI,aAAa;gBAAK,WAAU;;;;;;YACtD,OAAO;QACT;QACA;YACE,KAAK;YACL,OAAO;YACP,oBAAM,8OAAC,wMAAA,CAAA,UAAO;gBAAC,MAAM;gBAAI,aAAa;gBAAK,WAAU;;;;;;YACrD,OAAO;QACT;QACA;YACE,KAAK;YACL,OAAO;YACP,oBAAM,8OAAC,oMAAA,CAAA,QAAK;gBAAC,MAAM;gBAAI,aAAa;gBAAK,WAAU;;;;;;YACnD,OAAO;QACT;QACA;YACE,KAAK;YACL,OAAO;YACP,oBAAM,8OAAC,sMAAA,CAAA,SAAM;gBAAC,MAAM;gBAAI,aAAa;gBAAK,WAAU;;;;;;YACpD,OAAO;QACT;KACD;IAED,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC,yLAAA,CAAA,kBAAe;kBACd,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC7B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,MAAM;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC1B,WAAU;sBAET,QAAQ,GAAG,CAAC,CAAC,GAAG,kBACf,8OAAC,0LAAA,CAAA,SAAM,CAAC,MAAM;oBAEZ,SAAS;wBACP,OAAO,IAAI,CAAC,EAAE,KAAK;wBACnB,IAAI,SAAS;oBACf;oBACA,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAG;oBAC7B,SAAS;wBAAE,SAAS;wBAAG,GAAG;wBAAG,YAAY;4BAAE,OAAO,IAAI;wBAAK;oBAAE;oBAC7D,MAAM;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBACzB,WAAU;;sCAEV,8OAAC;4BAAI,WAAU;sCAA4C,EAAE,IAAI;;;;;;sCACjE,8OAAC;4BAAI,WAAU;sCAAwC,EAAE,KAAK;;;;;;;mBAXzD,EAAE,GAAG;;;;;;;;;;;;;;;AAiBtB","debugId":null}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/src/components/home/FloatingActionButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Plus } from \"lucide-react\";\r\nimport ActionMenu from \"./ActionMenu\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nexport default function FloatingActionButton() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      {/* overlay suave com blur - fecha ao clicar */}\r\n      <AnimatePresence>\r\n        {open && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={() => setOpen(false)}\r\n            className=\"fixed inset-0 z-40 backdrop-blur-sm bg-black/12\"\r\n          />\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Action menu (posicionado acima do FAB) */}\r\n      <ActionMenu open={open} onClose={() => setOpen(false)} />\r\n\r\n      {/* FAB */}\r\n      <motion.button\r\n        aria-label=\"Ações rápidas\"\r\n        onClick={() => setOpen((s) => !s)}\r\n        className=\"fixed right-5 bottom-24 z-50 w-14 h-14 rounded-full bg-[#00C974] flex items-center justify-center shadow-[0_8px_20px_rgba(0,0,0,0.12)]\"\r\n        whileTap={{ scale: 0.95 }}\r\n      >\r\n        <Plus size={26} strokeWidth={3} className=\"text-white\" />\r\n      </motion.button>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAAA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjC,qBACE;;0BAEE,8OAAC,yLAAA,CAAA,kBAAe;0BACb,sBACC,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,MAAM;wBAAE,SAAS;oBAAE;oBACnB,SAAS,IAAM,QAAQ;oBACvB,WAAU;;;;;;;;;;;0BAMhB,8OAAC,wIAAA,CAAA,UAAU;gBAAC,MAAM;gBAAM,SAAS,IAAM,QAAQ;;;;;;0BAG/C,8OAAC,0LAAA,CAAA,SAAM,CAAC,MAAM;gBACZ,cAAW;gBACX,SAAS,IAAM,QAAQ,CAAC,IAAM,CAAC;gBAC/B,WAAU;gBACV,UAAU;oBAAE,OAAO;gBAAK;0BAExB,cAAA,8OAAC,kMAAA,CAAA,OAAI;oBAAC,MAAM;oBAAI,aAAa;oBAAG,WAAU;;;;;;;;;;;;;AAIlD","debugId":null}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/src/components/home/ProgressCircles.tsx"],"sourcesContent":["import { motion } from \"framer-motion\";\r\n\r\nexport default function CircularProgress({ value }) {\r\n  const radius = 36;\r\n  const circumference = 2 * Math.PI * radius;\r\n  const progress = ((100 - value) / 100) * circumference;\r\n\r\n  return (\r\n    <svg width=\"90\" height=\"90\">\r\n      <circle\r\n        cx=\"45\"\r\n        cy=\"45\"\r\n        r={radius}\r\n        stroke=\"#e5e7eb\"\r\n        strokeWidth=\"8\"\r\n        fill=\"none\"\r\n      />\r\n\r\n      <motion.circle\r\n        cx=\"45\"\r\n        cy=\"45\"\r\n        r={radius}\r\n        stroke=\"#10b981\"\r\n        strokeWidth=\"8\"\r\n        fill=\"none\"\r\n        strokeLinecap=\"round\"\r\n        strokeDasharray={circumference}\r\n        strokeDashoffset={progress}\r\n        initial={{ strokeDashoffset: circumference }}\r\n        animate={{ strokeDashoffset: progress }}\r\n        transition={{ duration: 1 }}\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,iBAAiB,EAAE,KAAK,EAAE;IAChD,MAAM,SAAS;IACf,MAAM,gBAAgB,IAAI,KAAK,EAAE,GAAG;IACpC,MAAM,WAAW,AAAC,CAAC,MAAM,KAAK,IAAI,MAAO;IAEzC,qBACE,8OAAC;QAAI,OAAM;QAAK,QAAO;;0BACrB,8OAAC;gBACC,IAAG;gBACH,IAAG;gBACH,GAAG;gBACH,QAAO;gBACP,aAAY;gBACZ,MAAK;;;;;;0BAGP,8OAAC,0LAAA,CAAA,SAAM,CAAC,MAAM;gBACZ,IAAG;gBACH,IAAG;gBACH,GAAG;gBACH,QAAO;gBACP,aAAY;gBACZ,MAAK;gBACL,eAAc;gBACd,iBAAiB;gBACjB,kBAAkB;gBAClB,SAAS;oBAAE,kBAAkB;gBAAc;gBAC3C,SAAS;oBAAE,kBAAkB;gBAAS;gBACtC,YAAY;oBAAE,UAAU;gBAAE;;;;;;;;;;;;AAIlC","debugId":null}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/src/components/home/MealCard.tsx"],"sourcesContent":["// components/home/MealCard.tsx\r\n\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Check, Coffee, Moon } from \"lucide-react\";\r\n\r\nexport default function MealCard({\r\n  meal,\r\n  onToggle,\r\n}: {\r\n  meal: any;\r\n  onToggle: () => void;\r\n}) {\r\n  return (\r\n    <div className=\"flex items-center justify-between p-4 rounded-2xl bg-white shadow-[0_6px_18px_rgba(0,0,0,0.04)]\">\r\n      <div className=\"flex items-start gap-4\">\r\n        <div className=\"w-10 h-10 rounded-xl bg-gray-50 flex items-center justify-center text-green-600\">\r\n          {/* ícone simples placeholder */}\r\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M3 12h18\" stroke=\"#00C974\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\r\n          </svg>\r\n        </div>\r\n\r\n        <div>\r\n          <div className=\"text-sm font-medium\">{meal.title}</div>\r\n          <div className=\"text-xs text-gray-500 mt-1\">{meal.description ?? \"\"}</div>\r\n          <div className=\"text-xs text-gray-400 mt-2\">\r\n            {meal.calories ?? \"-\"} kcal • {meal.protein ?? \"-\"}g P\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col items-end gap-2\">\r\n        <button\r\n          onClick={onToggle}\r\n          className={`px-3 py-2 rounded-full ${meal.eaten ? \"bg-[#00C974] text-white\" : \"bg-gray-100 text-gray-700\"}`}\r\n        >\r\n          {meal.eaten ? <Check size={16} /> : \"Registrar\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;AAI/B;AAHA;;;AAKe,SAAS,SAAS,EAC/B,IAAI,EACJ,QAAQ,EAIT;IACC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAEb,cAAA,8OAAC;4BAAI,OAAM;4BAAK,QAAO;4BAAK,SAAQ;4BAAY,MAAK;sCACnD,cAAA,8OAAC;gCAAK,GAAE;gCAAW,QAAO;gCAAU,aAAY;gCAAI,eAAc;;;;;;;;;;;;;;;;kCAItE,8OAAC;;0CACC,8OAAC;gCAAI,WAAU;0CAAuB,KAAK,KAAK;;;;;;0CAChD,8OAAC;gCAAI,WAAU;0CAA8B,KAAK,WAAW,IAAI;;;;;;0CACjE,8OAAC;gCAAI,WAAU;;oCACZ,KAAK,QAAQ,IAAI;oCAAI;oCAAS,KAAK,OAAO,IAAI;oCAAI;;;;;;;;;;;;;;;;;;;0BAKzD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,SAAS;oBACT,WAAW,CAAC,uBAAuB,EAAE,KAAK,KAAK,GAAG,4BAA4B,6BAA6B;8BAE1G,KAAK,KAAK,iBAAG,8OAAC,oMAAA,CAAA,QAAK;wBAAC,MAAM;;;;;+BAAS;;;;;;;;;;;;;;;;;AAK9C","debugId":null}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/src/components/home/HomeMain.tsx"],"sourcesContent":["// components/home/HomeMain.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport BottomBar from \"./BottomBar\";\r\nimport FloatingActionButton from \"./FloatingActionButton\";\r\n\r\nimport { motion } from \"framer-motion\";\r\nimport ProgressCircles from \"./ProgressCircles\";\r\nimport MealCard from \"./MealCard\";\r\nimport { ChevronRight } from \"lucide-react\";\r\n\r\ntype MealPlanItem = {\r\n  id?: string;\r\n  title: string;\r\n  calories?: number;\r\n  protein?: number;\r\n  carbs?: number;\r\n  fat?: number;\r\n  description?: string;\r\n  eaten?: boolean;\r\n  generatedByAI?: boolean;\r\n};\r\n\r\nexport default function HomeMain() {\r\n  const { user } = useAuth();\r\n  const [loading, setLoading] = useState(true);\r\n  const [todayMeals, setTodayMeals] = useState<MealPlanItem[]>([]);\r\n  const [shoppingPreview, setShoppingPreview] = useState<string[]>([]);\r\n  const [dailyStats, setDailyStats] = useState({\r\n    waterPercent: 0,\r\n    mealsPercent: 0,\r\n    caloriesPercent: 0,\r\n    calories: 0,\r\n    caloriesGoal: 2000,\r\n  });\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        // 1) buscar plano gerado pela IA (ai_generated_plans) — se existir use o dia hoje\r\n        if (!user) {\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        const { data: aiPlans } = await supabase\r\n          .from(\"ai_generated_plans\")\r\n          .select(\"id, user_id, plan_type, content, created_at\")\r\n          .eq(\"user_id\", user.id)\r\n          .order(\"created_at\", { ascending: false })\r\n          .limit(1);\r\n\r\n        if (aiPlans && aiPlans.length > 0) {\r\n          const content = aiPlans[0].content as any;\r\n          // Esperamos content.weekly: { \"2025-11-25\": [ {title, calories,...}, ... ] }\r\n          const todayKey = new Date().toISOString().slice(0, 10);\r\n          const todayArray =\r\n            content?.weekly?.[todayKey] ?? content?.today ?? null;\r\n          if (Array.isArray(todayArray)) {\r\n            setTodayMeals(\r\n              todayArray.map((m: any, i: number) => ({\r\n                id: m.id ?? `ai-${i}`,\r\n                title: m.title,\r\n                calories: m.calories,\r\n                protein: m.protein,\r\n                carbs: m.carbs,\r\n                fat: m.fat,\r\n                description: m.description,\r\n                eaten: false,\r\n                generatedByAI: true,\r\n              }))\r\n            );\r\n          }\r\n          // preview de lista de compras\r\n          setShoppingPreview(content?.shopping?.slice(0, 6) ?? []);\r\n        }\r\n\r\n        // 2) fallback: se não houver plano IA, tentar carregar localStorage (quiz_result_meta or quiz_plan)\r\n        const local =\r\n          typeof window !== \"undefined\"\r\n            ? localStorage.getItem(\"ai_plan\")\r\n            : null;\r\n        if (!aiPlans?.length && local) {\r\n          try {\r\n            const parsed = JSON.parse(local);\r\n            const todayArray =\r\n              parsed?.weekly?.[new Date().toISOString().slice(0, 10)] ??\r\n              parsed?.today;\r\n            if (Array.isArray(todayArray)) {\r\n              setTodayMeals(\r\n                todayArray.map((m: any, i: number) => ({\r\n                  id: m.id ?? `local-${i}`,\r\n                  title: m.title,\r\n                  calories: m.calories,\r\n                  protein: m.protein,\r\n                  carbs: m.carbs,\r\n                  fat: m.fat,\r\n                  description: m.description,\r\n                  eaten: false,\r\n                  generatedByAI: true,\r\n                }))\r\n              );\r\n            }\r\n            setShoppingPreview(parsed?.shopping?.slice(0, 6) ?? []);\r\n          } catch (e) {\r\n            // ignore\r\n          }\r\n        }\r\n\r\n        // 3) obter estatísticas básicas (pode derivar de weight_records / water_records / meals)\r\n        // simplificado: buscar total calorias de hoje registrados (caso exista tabela meals)\r\n        const { data: mealsToday } = await supabase\r\n          .from(\"meals\")\r\n          .select(\"id, user_id, type, description, calories\")\r\n          .eq(\"user_id\", user.id)\r\n          .gte(\"date\", new Date().toISOString().slice(0, 10))\r\n          .lte(\"date\", new Date().toISOString().slice(0, 10));\r\n\r\n        const caloriesSum = Array.isArray(mealsToday)\r\n          ? mealsToday.reduce((s: number, m: any) => s + (m.calories ?? 0), 0)\r\n          : 0;\r\n\r\n        setDailyStats((s) => ({ ...s, calories: caloriesSum }));\r\n      } catch (err) {\r\n        console.error(\"Erro ao carregar home:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [user]);\r\n\r\n  const handleToggleEaten = (index: number) => {\r\n    setTodayMeals((prev) =>\r\n      prev.map((m, i) => (i === index ? { ...m, eaten: !m.eaten } : m))\r\n    );\r\n\r\n    // atualizar porcentagem de refeições\r\n    setDailyStats((s) => {\r\n      const eaten =\r\n        todayMeals.filter((tm) => tm.eaten).length +\r\n        (todayMeals[index]?.eaten ? -1 : 1);\r\n      const percent = Math.round(\r\n        (eaten / Math.max(1, todayMeals.length)) * 100\r\n      );\r\n      return { ...s, mealsPercent: percent };\r\n    });\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-xl font-semibold\">Bem-vindo ao Auraline</h2>\r\n          <p className=\"text-sm text-gray-500\">\r\n            Faça login para ver seu plano.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white pb-28\">\r\n      <div className=\"max-w-3xl mx-auto px-5 pt-6\">\r\n        {/* HEADER */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center text-lg font-semibold text-gray-700\">\r\n              {user?.user_metadata?.full_name?.[0] ?? user?.email?.[0] ?? \"U\"}\r\n            </div>\r\n            <div>\r\n              <div className=\"text-sm text-gray-500\">Bom dia,</div>\r\n              <div className=\"text-xl font-bold text-[#0A0A0A]\">\r\n                {user?.user_metadata?.full_name ?? user?.email}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            className=\"flex items-center gap-1 text-green-600 cursor-pointer\"\r\n            onClick={() => router.push(\"/progresso\")}\r\n          >\r\n            <ChevronRight size={20} strokeWidth={2} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* CIRCULOS DE PROGRESSO */}\r\n        <div className=\"mt-6\">\r\n          <ProgressCircles\r\n            waterPercent={dailyStats.waterPercent}\r\n            mealsPercent={dailyStats.mealsPercent}\r\n            caloriesPercent={Math.min(\r\n              100,\r\n              Math.round((dailyStats.calories / dailyStats.caloriesGoal) * 100)\r\n            )}\r\n            calories={dailyStats.calories}\r\n            caloriesGoal={dailyStats.caloriesGoal}\r\n          />\r\n        </div>\r\n\r\n        {/* REFEIÇÕES DO DIA */}\r\n        <div className=\"mt-6 space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h3 className=\"text-lg font-semibold\">Refeições de hoje</h3>\r\n            <span className=\"text-sm text-gray-500\">\r\n              {new Date().toLocaleDateString()}\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            {loading && <div className=\"text-gray-400\">Carregando...</div>}\r\n            {!loading && todayMeals.length === 0 && (\r\n              <div className=\"text-gray-500\">\r\n                Nenhuma refeição encontrada para hoje — a IA ainda não gerou um\r\n                plano.\r\n              </div>\r\n            )}\r\n            {!loading &&\r\n              todayMeals.map((m, i) => (\r\n                <MealCard\r\n                  key={m.id ?? i}\r\n                  meal={m}\r\n                  onToggle={() => handleToggleEaten(i)}\r\n                />\r\n              ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* PLANO DA SEMANA (preview pequeno) */}\r\n        <motion.div className=\"mt-6 p-4 rounded-2xl bg-white shadow-[0_6px_20px_rgba(0,0,0,0.04)]\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"text-sm text-gray-500\">Plano da semana</div>\r\n              <div className=\"text-base font-semibold\">\r\n                Sua sugestão personalizada\r\n              </div>\r\n            </div>\r\n            <button className=\"text-sm text-[#00C974]\">\r\n              Ver cardápio completo\r\n            </button>\r\n          </div>\r\n          <div className=\"mt-3 text-sm text-gray-600\">\r\n            Visualize o plano semanal gerado pela IA — toque no dia para ver\r\n            detalhes.\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* LISTA DE COMPRAS PREVIEW */}\r\n        <div className=\"mt-6 flex gap-4 items-center justify-between\">\r\n          <div className=\"flex-1 p-4 rounded-2xl bg-white shadow-[0_6px_20px_rgba(0,0,0,0.04)]\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <div className=\"text-sm text-gray-500\">Lista de compras</div>\r\n                <div className=\"text-base font-semibold\">Itens sugeridos</div>\r\n              </div>\r\n              <button className=\"text-sm text-[#00C974]\">Abrir lista</button>\r\n            </div>\r\n\r\n            <div className=\"mt-3 text-sm text-gray-600\">\r\n              {shoppingPreview.length === 0 ? (\r\n                <span className=\"text-gray-400\">Nenhum item gerado ainda</span>\r\n              ) : (\r\n                <ul className=\"space-y-1\">\r\n                  {shoppingPreview.map((s, i) => (\r\n                    <li key={i} className=\"text-sm text-gray-700\">\r\n                      • {s}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* BLOCO PEQUENO DE STATUS */}\r\n          <div className=\"w-40 p-4 rounded-2xl bg-white shadow-[0_6px_20px_rgba(0,0,0,0.04)]\">\r\n            <div className=\"text-sm text-gray-500\">Calorias</div>\r\n            <div className=\"text-lg font-semibold text-[#0A0A0A]\">\r\n              {dailyStats.calories} kcal\r\n            </div>\r\n            <div className=\"text-xs text-gray-400 mt-1\">\r\n              Meta: {dailyStats.caloriesGoal} kcal\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* FAB + BottomBar */}\r\n      <FloatingActionButton />\r\n      <BottomBar />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}