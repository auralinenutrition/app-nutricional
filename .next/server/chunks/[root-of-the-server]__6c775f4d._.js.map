{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/src/services/meals/analyzeMeal.ts"],"sourcesContent":["import OpenAI from \"openai\";\r\n\r\nconst openai = new OpenAI({\r\n  apiKey: process.env.OPENAI_API_KEY!,\r\n});\r\n\r\nexport async function analyzeMeal(imageUrl: string) {\r\n  const prompt = `\r\nVocê é um nutricionista. Analise a refeição da imagem e retorne APENAS um JSON:\r\n\r\n{\r\n  \"description\": string,\r\n  \"calories\": number,\r\n  \"protein\": number,\r\n  \"carbs\": number,\r\n  \"fat\": number,\r\n  \"portion_size\": string\r\n}\r\n\r\nSem explicações.\r\n`;\r\n\r\n  try {\r\n    const response = await openai.chat.completions.create({\r\n      model: \"gpt-4o\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content: \"Você é um nutricionista.\"\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: [\r\n            { type: \"text\", text: prompt },\r\n            { type: \"image_url\", image_url: { url: imageUrl } }\r\n          ]\r\n        }\r\n      ],\r\n      max_tokens: 512,\r\n      temperature: 0.2\r\n    });\r\n\r\n    const text = response.choices[0].message.content;\r\n    return JSON.parse(text ?? \"\");\r\n\r\n  } catch (err) {\r\n    console.error(\"Erro ao analisar refeição:\", err);\r\n    throw err;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,SAAS,IAAI,kJAAA,CAAA,UAAM,CAAC;IACxB,QAAQ,QAAQ,GAAG,CAAC,cAAc;AACpC;AAEO,eAAe,YAAY,QAAgB;IAChD,MAAM,SAAS,CAAC;;;;;;;;;;;;;AAalB,CAAC;IAEC,IAAI;QACF,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SAAS;gBACX;gBACA;oBACE,MAAM;oBACN,SAAS;wBACP;4BAAE,MAAM;4BAAQ,MAAM;wBAAO;wBAC7B;4BAAE,MAAM;4BAAa,WAAW;gCAAE,KAAK;4BAAS;wBAAE;qBACnD;gBACH;aACD;YACD,YAAY;YACZ,aAAa;QACf;QAEA,MAAM,OAAO,SAAS,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO;QAChD,OAAO,KAAK,KAAK,CAAC,QAAQ;IAE5B,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/src/app/api/meals/analyze/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { analyzeMeal } from \"@/services/meals/analyzeMeal\";\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { imageUrl } = await req.json();\r\n\r\n    if (!imageUrl) {\r\n      return NextResponse.json(\r\n        { error: \"imageUrl é obrigatório.\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Chama a função que envia a imagem para a OpenAI\r\n    const result = await analyzeMeal(imageUrl);\r\n\r\n    return NextResponse.json({ success: true, data: result });\r\n  } catch (err: any) {\r\n    console.error(\"Erro na rota /api/meals/analyze:\", err);\r\n    return NextResponse.json(\r\n      { error: \"Erro ao analisar refeição.\", details: err?.message },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAEnC,IAAI,CAAC,UAAU;YACb,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,kDAAkD;QAClD,MAAM,SAAS,MAAM,CAAA,GAAA,yIAAA,CAAA,cAAW,AAAD,EAAE;QAEjC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAO;IACzD,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAA8B,SAAS,KAAK;QAAQ,GAC7D;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}