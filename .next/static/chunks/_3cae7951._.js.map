{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport AInput from \"@/components/ui/AInput\";\r\nimport AButton from \"@/components/ui/AButton\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport default function Login() {\r\n  const { user, signIn } = useAuth();\r\n  const router = useRouter();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [senha, setSenha] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleLogin = async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      // 1) autenticar\r\n      await signIn(email, senha);\r\n\r\n      // 2) recuperar usuário logado\r\n      const { data: sessionData } = await supabase.auth.getSession();\r\n      const userId = sessionData.session?.user?.id;\r\n\r\n      if (!userId) {\r\n        throw new Error(\"Não foi possível identificar o usuário logado.\");\r\n      }\r\n\r\n      // 3) atualizar last_login\r\n      await supabase\r\n        .from(\"users\")\r\n        .update({\r\n          last_login: new Date().toISOString(),\r\n        })\r\n        .eq(\"id\", userId);\r\n\r\n      // 4) redirecionar\r\n      router.push(\"/home\");\r\n    } catch (err: any) {\r\n      alert(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen w-full flex items-center justify-center p-6\">\r\n      <div className=\"w-full max-w-sm flex flex-col gap-6\">\r\n        <h1 className=\"text-3xl font-bold text-[#0A0A0A]\">\r\n          Bem-vindo de volta\r\n        </h1>\r\n\r\n        <div className=\"flex flex-col gap-4\">\r\n          <AInput\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n              setEmail(e.target.value)\r\n            }\r\n          />\r\n\r\n          <AInput\r\n            label=\"Senha\"\r\n            type=\"password\"\r\n            value={senha}\r\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n              setSenha(e.target.value)\r\n            }\r\n          />\r\n\r\n          <AButton type=\"button\" onClick={handleLogin}>\r\n            {loading ? \"Entrando...\" : \"Entrar\"}\r\n          </AButton>\r\n\r\n          <p className=\"text-center text-sm mt-4 text-[#6F6F6F]\">\r\n            Ainda não tem conta?\r\n          </p>\r\n          <p\r\n            onClick={() => router.push(\"/quiz\")}\r\n            className=\"text-center text-sm font-semibold text-[#00C974] cursor-pointer\"\r\n          >\r\n            Complete o quiz para começar\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,UAAO,AAAD;IAC/B,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,cAAc;QAClB,IAAI;gBAQa,2BAAA;YAPf,WAAW;YAEX,gBAAgB;YAChB,MAAM,OAAO,OAAO;YAEpB,8BAA8B;YAC9B,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,yHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,UAAU;YAC5D,MAAM,UAAS,uBAAA,YAAY,OAAO,cAAnB,4CAAA,4BAAA,qBAAqB,IAAI,cAAzB,gDAAA,0BAA2B,EAAE;YAE5C,IAAI,CAAC,QAAQ;gBACX,MAAM,IAAI,MAAM;YAClB;YAEA,0BAA0B;YAC1B,MAAM,yHAAA,CAAA,WAAQ,CACX,IAAI,CAAC,SACL,MAAM,CAAC;gBACN,YAAY,IAAI,OAAO,WAAW;YACpC,GACC,EAAE,CAAC,MAAM;YAEZ,kBAAkB;YAClB,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAU;YACjB,MAAM,IAAI,OAAO;QACnB,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAoC;;;;;;8BAIlD,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,qIAAA,CAAA,UAAM;4BACL,OAAM;4BACN,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IACT,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;sCAI3B,6LAAC,qIAAA,CAAA,UAAM;4BACL,OAAM;4BACN,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IACT,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;sCAI3B,6LAAC,sIAAA,CAAA,UAAO;4BAAC,MAAK;4BAAS,SAAS;sCAC7B,UAAU,gBAAgB;;;;;;sCAG7B,6LAAC;4BAAE,WAAU;sCAA0C;;;;;;sCAGvD,6LAAC;4BACC,SAAS,IAAM,OAAO,IAAI,CAAC;4BAC3B,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GAnFwB;;QACG,kIAAA,CAAA,UAAO;QACjB,qIAAA,CAAA,YAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kaiky/OneDrive/%C3%81rea%20de%20Trabalho/Auraline/app-nutricional/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}